<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Search Datasets and Variables | openESM</title>
<meta name="keywords" content="">
<meta name="description" content="Use the search box below to find datasets and variables in the OpenESM database.


Filters

Dataset Size

Min Participants



Min Observations



Min Days




Data Types


Passive data



Cross-sectional data



Raw timestamp



Constructs


All constructs
▼











0 datasets selected
▼


Clear Selection


R Code



Python Code









">
<meta name="author" content="">
<link rel="canonical" href="https://openesmdata.org/search/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.4f1c6402dd794e76aa12c1e4f807acccf88ce36df87ebcaf5c2228c339c57c44.css" integrity="sha256-TxxkAt15TnaqEsHk&#43;AeszPiM4234fryvXCIowznFfEQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://openesmdata.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://openesmdata.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://openesmdata.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://openesmdata.org/apple-touch-icon.png">
<link rel="mask-icon" href="https://openesmdata.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://openesmdata.org/search/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:url" content="https://openesmdata.org/search/">
  <meta property="og:site_name" content="openESM">
  <meta property="og:title" content="Search Datasets and Variables">
  <meta property="og:description" content="Use the search box below to find datasets and variables in the OpenESM database.
FiltersDataset SizeMin ParticipantsMin ObservationsMin DaysData TypesPassive dataCross-sectional dataRaw timestampConstructsAll constructs▼0 datasets selected▼Clear SelectionR CodePython Code">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Search Datasets and Variables">
<meta name="twitter:description" content="Use the search box below to find datasets and variables in the OpenESM database.


Filters

Dataset Size

Min Participants



Min Observations



Min Days




Data Types


Passive data



Cross-sectional data



Raw timestamp



Constructs


All constructs
▼











0 datasets selected
▼


Clear Selection


R Code



Python Code









">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Search Datasets and Variables",
      "item": "https://openesmdata.org/search/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Search Datasets and Variables",
  "name": "Search Datasets and Variables",
  "description": "Use the search box below to find datasets and variables in the OpenESM database.\nFilters\rDataset Size\rMin Participants\rMin Observations\rMin Days\rData Types\rPassive data\rCross-sectional data\rRaw timestamp\rConstructs\rAll constructs\r▼\r0 datasets selected\r▼\rClear Selection\rR Code\rPython Code\r",
  "keywords": [
    
  ],
  "articleBody": "Use the search box below to find datasets and variables in the OpenESM database.\nFilters\rDataset Size\rMin Participants\rMin Observations\rMin Days\rData Types\rPassive data\rCross-sectional data\rRaw timestamp\rConstructs\rAll constructs\r▼\r0 datasets selected\r▼\rClear Selection\rR Code\rPython Code\r",
  "wordCount" : "45",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://openesmdata.org/search/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "openESM",
    "logo": {
      "@type": "ImageObject",
      "url": "https://openesmdata.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://openesmdata.org/" accesskey="h" title="openESM (Alt + H)">
                <img src="https://openesmdata.org/openesm_icon.svg" alt="openESM" class="logo-image">
            </a>
        </div>
        <ul id="menu">
            <li>
                <a href="https://openesmdata.org/" title="Home (Alt &#43; /)" accesskey=/>
                    <span>Home
                    </span>
                </a>
            </li>
            <li>
                <a href="https://openesmdata.org/about/" title="About (Alt &#43; /)" accesskey=/>
                    <span>About
                    </span>
                </a>
            </li>
            <li>
                <a href="https://openesmdata.org/datasets/" title="Datasets (Alt &#43; /)" accesskey=/>
                    <span>Datasets
                    </span>
                </a>
            </li>
            <li>
                <a href="https://openesmdata.org/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span class="active">Search
                    </span>
                </a>
            </li>
            <li>
                <a href="https://openesmdata.org/docs/" title="Documentation (Alt &#43; /)" accesskey=/>
                    <span>Documentation
                    </span>
                </a>
            </li>
        </ul>
    </nav>
</header><main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Search Datasets and Variables
    </h1>
    <div class="post-meta">

</div>
  </header> 
  <div class="post-content"><p>Use the search box below to find datasets and variables in the OpenESM database.</p>
<div id="custom-search-container" style="display: flex; gap: 20px;">
<aside style="width: 250px; background-color: var(--code-bg); padding: 20px; border-radius: 8px; height: fit-content; flex-shrink: 0; border: 1px solid var(--border);">
<h3 style="margin-top: 0; margin-bottom: 20px; font-size: 1.1rem; border-bottom: 1px solid var(--border); padding-bottom: 10px;">Filters</h3>
<div style="margin-bottom: 20px;">
<h4 style="margin-bottom: 10px; font-size: 0.9rem; color: var(--secondary);">Dataset Size</h4>
<div style="margin-bottom: 15px;">
<label for="min-participants" style="display: block; font-weight: 500; margin-bottom: 5px; font-size: 0.875rem;">Min Participants</label>
<input type="number" id="min-participants" min="1" value="1" style="width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 4px; background-color: var(--entry); color: var(--primary);">
</div>
<div>
<label for="min-observations" style="display: block; font-weight: 500; margin-bottom: 5px; font-size: 0.875rem;">Min Observations</label>
<input type="number" id="min-observations" min="1" value="1" style="width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 4px; background-color: var(--entry); color: var(--primary);">
</div>
<div>
<label for="min-days" style="display: block; font-weight: 500; margin-bottom: 5px; font-size: 0.875rem;">Min Days</label>
<input type="number" id="min-days" min="1" value="1" style="width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 4px; background-color: var(--entry); color: var(--primary);">
</div>
</div>
<div style="margin-bottom: 20px;">
<h4 style="margin-bottom: 10px; font-size: 0.9rem; color: var(--secondary);">Data Types</h4>
<div style="margin-bottom: 8px; display: flex; align-items: center;">
<input type="checkbox" id="passive-data" style="margin-right: 8px;">
<label for="passive-data" style="font-size: 0.875rem;">Passive data</label>
</div>
<div style="margin-bottom: 8px; display: flex; align-items: center;">
<input type="checkbox" id="cross-sectional" style="margin-right: 8px;">
<label for="cross-sectional" style="font-size: 0.875rem;">Cross-sectional data</label>
</div>
<div style="display: flex; align-items: center;">
<input type="checkbox" id="raw-timestamp" style="margin-right: 8px;">
<label for="raw-timestamp" style="font-size: 0.875rem;">Raw timestamp</label>
</div>
</div>
<div>
<h4 style="margin-bottom: 10px; font-size: 0.9rem; color: var(--secondary);">Constructs</h4>
<div class="construct-dropdown">
<button class="construct-button" id="construct-button">
<span id="construct-button-text">All constructs</span>
<span>▼</span>
</button>
<div class="construct-dropdown-content" id="construct-dropdown">
<!-- Constructs will be populated dynamically -->
</div>
</div>
</div>
</aside>
<main style="flex: 1;">
<input type="text" id="custom-search-input" placeholder="Search datasets and variables...">
<div id="selected-datasets" class="selected-datasets hidden">
<div class="selected-header">
<h3 id="selected-count">0 datasets selected<a hidden class="anchor" aria-hidden="true" href="#selected-count">#</a></h3>
<span class="toggle-arrow">▼</span>
</div>
<div class="selected-content">
<button id="clear-selection-btn" class="clear-btn">Clear Selection</button>
<div class="code-section">
<div class="code-block">
<div class="code-header">R Code</div>
<pre><code class="code-content" id="r-code"></code></pre>
</div>
<div class="code-block">
<div class="code-header">Python Code</div>
<pre><code class="code-content" id="python-code"></code></pre>
</div>
</div>
</div>
</div>
<div id="custom-search-results"></div>
</main>
</div>
<script src="https://unpkg.com/lunr/lunr.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    let datasets = [];
    let idx = null;
    let selectedDatasets = new Set();
    let selectedConstructs = new Set();
    let constructCounts = {};
    const debug = false;
    function log(message, data) {
        if (debug) {
            console.log(message, data || '');
        }
    }
    const basePath = window.location.pathname.includes('/openesm/') ? '/openesm' : '';
    const jsonUrl = `${basePath}/data/datasets-index.json`;
    fetch(jsonUrl)
        .then(response => {
            if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
            return response.json();
        })
        .then(data => {
            datasets = data;
            buildSearchIndex();
            buildConstructCounts();
            populateConstructDropdown();
            setupEventListeners();
            performSearch();
        })
        .catch(error => {
            console.error('Error loading search index:', error);
            const resultsContainer = document.getElementById('custom-search-results');
            if (resultsContainer) {
                resultsContainer.innerHTML = '<p>Error loading search index. ' + error.message + '</p>';
            }
        });
    function buildSearchIndex() {
        idx = lunr(function() {
            this.ref('id');
            this.field('first_author', { boost: 10 });
            this.field('year', { boost: 5 });
            this.field('topics', { boost: 8 });
            this.field('variables', { boost: 5 });
            datasets.forEach(doc => {
                const variableText = Array.isArray(doc.variables)
    ? doc.variables.map(v => {
        const constructs = Array.isArray(v.construct) ? v.construct.join(' ') : (v.construct || '');
        return `${v.name || ''} ${v.description || ''} ${v.variable_type || ''} ${constructs}`;
    }).join(' ')
    : '';
                this.add({
                    id: doc.id,
                    first_author: doc.first_author || '',
                    year: (doc.year || '').toString(),
                    topics: doc.topics || '',
                    variables: variableText
                });
            });
        });
    }
    function buildConstructCounts() {
        constructCounts = {};
        datasets.forEach(dataset => {
            const datasetConstructs = new Set();
            if (Array.isArray(dataset.variables)) {
                dataset.variables.forEach(variable => {
                    if (variable.construct) {
                        const constructs = Array.isArray(variable.construct)
                            ? variable.construct
                            : [variable.construct];
                        // Split by comma and flatten the array
                        const individualConstructs = constructs.flatMap(c => {
                            return c && typeof c === 'string'
                             ? c.split(',').map(s => s.trim()).filter(Boolean)
                              : [];
                        });
                        individualConstructs.forEach(construct => {
                            if (construct) { // Already trimmed and filtered for non-empty
                                datasetConstructs.add(construct);
                            }
                        });
                    }
                });
            }
            datasetConstructs.forEach(construct => {
                constructCounts[construct] = (constructCounts[construct] || 0) + 1;
            });
        });
        log("Construct counts:", constructCounts);
    }
    function highlightSearchTerms(text, query) {
    if (!text || !query.trim()) return text;
    // Extract individual terms from query, remove special characters
    const terms = query.toLowerCase()
        .split(/\s+/)
        .filter(term => term.length > 1) // Ignore single characters
        .map(term => term.replace(/[^\w]/g, '')); // Remove special chars
    if (terms.length === 0) return text;
    // Create regex pattern for all terms (case insensitive)
    const pattern = terms.map(term => 
        term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') // Escape special regex chars
    ).join('|');
    const regex = new RegExp(`(${pattern})`, 'gi');
    return text.replace(regex, '<mark class="search-highlight">$1</mark>');
}
function getMatchIndicators(dataset, query) {
    if (!query.trim()) return [];
    const indicators = [];
    const queryTerms = query.toLowerCase().split(/\s+/).filter(term => term.length > 1);
    // Check title match (first_author + year)
    const titleText = `${dataset.first_author} ${dataset.year}`.toLowerCase();
    if (queryTerms.some(term => titleText.includes(term))) {
        indicators.push('Author/Year');
    }
    // Check topics match
    const topicsText = (dataset.topics || '').toLowerCase();
    if (queryTerms.some(term => topicsText.includes(term))) {
        indicators.push('Topics');
    }
    // Check variables match
    let hasVariableMatch = false;
    if (Array.isArray(dataset.variables)) {
        hasVariableMatch = dataset.variables.some(variable => {
            const variableText = `${variable.name || ''} ${variable.description || ''}`.toLowerCase();
            return queryTerms.some(term => variableText.includes(term));
        });
    }
    if (hasVariableMatch) {
        indicators.push('Variables');
    }
    return indicators;
}
    function populateConstructDropdown() {
        const dropdown = document.getElementById('construct-dropdown');
        dropdown.innerHTML = '';
        const sortedConstructs = Object.entries(constructCounts)
            .sort((a, b) => {
                if (b[1] !== a[1]) return b[1] - a[1];
                return a[0].localeCompare(b[0]);
            });
        sortedConstructs.forEach(([construct, count]) => {
            const item = document.createElement('div');
            item.className = 'construct-item';
            item.innerHTML = `
                <input type="checkbox" id="construct-${construct.replace(/\s+/g, '-')}" value="${construct}">
                <label for="construct-${construct.replace(/\s+/g, '-')}">${construct}</label>
                <span class="construct-count">(${count})</span>
            `;
            const checkbox = item.querySelector('input');
            checkbox.addEventListener('change', (e) => {
                if (e.target.checked) {
                    selectedConstructs.add(construct);
                } else {
                    selectedConstructs.delete(construct);
                }
                updateConstructButtonText();
                performSearch();
            });
            dropdown.appendChild(item);
        });
    }
    function updateConstructButtonText() {
        const buttonText = document.getElementById('construct-button-text');
        if (selectedConstructs.size === 0) {
            buttonText.textContent = 'All constructs';
        } else if (selectedConstructs.size === 1) {
            buttonText.textContent = Array.from(selectedConstructs)[0];
        } else {
            buttonText.textContent = `${selectedConstructs.size} constructs selected`;
        }
    }
    function setupEventListeners() {
        document.getElementById('custom-search-input').addEventListener('input', performSearch);
        document.getElementById('min-participants').addEventListener('input', performSearch);
        document.getElementById('min-observations').addEventListener('input', performSearch);
        document.getElementById('min-days').addEventListener('input', performSearch);
        document.getElementById('passive-data').addEventListener('change', performSearch);
        document.getElementById('cross-sectional').addEventListener('change', performSearch);
        document.getElementById('raw-timestamp').addEventListener('change', performSearch);
        document.querySelector('.selected-header').addEventListener('click', toggleSelectedSection);
        document.getElementById('clear-selection-btn').addEventListener('click', clearSelection);
        // Construct dropdown toggle
        const constructButton = document.getElementById('construct-button');
        const constructDropdown = document.getElementById('construct-dropdown');
        constructButton.addEventListener('click', (e) => {
            e.stopPropagation();
            constructDropdown.classList.toggle('show');
            constructButton.classList.toggle('active');
        });
        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
            constructDropdown.classList.remove('show');
            constructButton.classList.remove('active');
        });
        // Prevent dropdown from closing when clicking inside
        constructDropdown.addEventListener('click', (e) => {
            e.stopPropagation();
        });
    }
    function performSearch() {
        const query = document.getElementById('custom-search-input').value;
        let searchResults;
        if (query.trim() !== '') {
            try {
                searchResults = idx.search(query);
            } catch (error) {
                console.error("Search error:", error);
                document.getElementById('custom-search-results').innerHTML = '<p>Search error: ' + error.message + '</p>';
                return;
            }
        } else {
            searchResults = datasets.map(d => ({ ref: d.id, score: 1, matchData: { metadata: {} } }));
        }
        const mappedResults = searchResults.map(result => {
            const dataset = datasets.find(d => d.id === result.ref);
            if (dataset) {
                dataset.score = result.score;
                dataset.matchedTerms = Object.keys(result.matchData.metadata);
            }
            return dataset;
        });
        const filteredResults = applyFilters(mappedResults);
        displayResults(filteredResults, query);
    }
    function applyFilters(results) {
        const minParticipants = parseInt(document.getElementById('min-participants').value) || 1;
        const minObservations = parseInt(document.getElementById('min-observations').value) || 1;
        const minDays = parseInt(document.getElementById('min-days').value) || 1;
        const needsPassiveData = document.getElementById('passive-data').checked;
        const needsCrossSectional = document.getElementById('cross-sectional').checked;
        const needsRawTimestamp = document.getElementById('raw-timestamp').checked;
        return results.filter(dataset => {
            if (!dataset) return false;
            if ((dataset.n_participants || 0) < minParticipants) return false;
            if ((dataset.n_time_points || 0) < minObservations) return false;
            if ((dataset.n_days || 0) < minDays) return false;
            if (needsPassiveData && dataset.passive_data_available !== "yes") return false;
            if (needsCrossSectional && dataset.cross_sectional_available !== "yes") return false;
            if (needsRawTimestamp && dataset.raw_time_stamp !== "yes") return false;
            // check construct filter
            if (selectedConstructs.size > 0) {
                const datasetConstructs = new Set();
                if (Array.isArray(dataset.variables)) {
                    dataset.variables.forEach(variable => {
                        if (variable.construct) {
                            const constructs = Array.isArray(variable.construct)
                                ? variable.construct
                                : [variable.construct];
                            // Split by comma and flatten the array, then trim and filter
                            const individualConstructs = constructs.flatMap(c =>
                                c && typeof c === 'string'
                                    ? c.split(',').map(s => s.trim()).filter(Boolean)
                                    : []
                            );
                            individualConstructs.forEach(c => {
                                if (c) datasetConstructs.add(c); // Already trimmed and filtered for non-empty
                            });
                        }
                    });
                }
                // Check if dataset has any of the selected constructs
                const hasSelectedConstruct = Array.from(selectedConstructs).some(
                    construct => datasetConstructs.has(construct)
                );
                if (!hasSelectedConstruct) return false;
            }
            return true;
        });
    }
    function displayResults(results, query) {
    const resultsContainer = document.getElementById('custom-search-results');
    resultsContainer.innerHTML = '';
    const resultsHeader = document.createElement('div');
    resultsHeader.className = 'search-stats';
    resultsHeader.textContent = `${results.length} dataset${results.length !== 1 ? 's' : ''} found`;
    resultsContainer.appendChild(resultsHeader);
    if (results.length === 0) {
        resultsContainer.innerHTML += '<p>No results found matching your criteria.</p>';
        return;
    }
    results.forEach(dataset => {
        const isSelected = selectedDatasets.has(dataset.id);
        const datasetEl = document.createElement('div');
        datasetEl.className = `search-result ${isSelected ? 'selected' : ''}`;
        datasetEl.dataset.id = dataset.id;
        datasetEl.addEventListener('click', () => toggleDatasetSelection(dataset.id));
        const queryTerms = query.toLowerCase().split(/\s+/).filter(Boolean);
        const matchingVariables = query.trim() === '' ? [] : dataset.variables.filter(variable =>
            queryTerms.some(term =>
                (variable.name || '').toLowerCase().includes(term) ||
                (variable.description || '').toLowerCase().includes(term)
            )
        ).slice(0, 3);
        const url = dataset.url.startsWith('/') ? `${basePath}${dataset.url}` : dataset.url;
        // Apply highlighting to the title
        const highlightedTitle = highlightSearchTerms(
            `${dataset.first_author} (${dataset.year})`, 
            query
        );
        // Apply highlighting to topics
        const highlightedTopics = highlightSearchTerms(dataset.topics || 'N/A', query);
        // Get match indicators
        const matchIndicators = getMatchIndicators(dataset, query);
        const matchIndicatorHTML = matchIndicators.length > 0 ? 
            `<div class="match-indicators">Found in: ${matchIndicators.map(indicator => 
                `<span class="match-tag">${indicator}</span>`
            ).join('')}</div>` : '';
        datasetEl.innerHTML = `
            <div class="selection-checkbox ${isSelected ? 'selected' : ''}"></div>
            <h3><a href="${url}" onclick="event.stopPropagation()">${highlightedTitle}</a></h3>
            ${matchIndicatorHTML}
            <p><strong>Topics:</strong> ${highlightedTopics}</p>
            <p><strong>Participants:</strong> ${dataset.n_participants || 'N/A'} | <strong>Time points:</strong> ${dataset.n_time_points || 'N/A'} | <strong>Days:</strong> ${dataset.n_days || 'N/A'}</p>
            ${matchingVariables.length > 0 ? `
                <div class="matching-variables">
                    <h4>Matching Variables</h4>
                    <ul>
                        ${matchingVariables.map(v => {
                            const highlightedName = highlightSearchTerms(v.name, query);
                            const highlightedDesc = highlightSearchTerms(v.description || 'No description.', query);
                            return `<li><strong>${highlightedName}</strong>: ${highlightedDesc}</li>`;
                        }).join('')}
                    </ul>
                </div>
            ` : ''}
        `;
        resultsContainer.appendChild(datasetEl);
    });
}
    function toggleDatasetSelection(datasetId) {
        const resultEl = document.querySelector(`.search-result[data-id="${datasetId}"]`);
        const checkboxEl = resultEl.querySelector('.selection-checkbox');
        if (selectedDatasets.has(datasetId)) {
            selectedDatasets.delete(datasetId);
            resultEl.classList.remove('selected');
            checkboxEl.classList.remove('selected');
        } else {
            selectedDatasets.add(datasetId);
            resultEl.classList.add('selected');
            checkboxEl.classList.add('selected');
        }
        updateSelectedSection();
    }
    function updateSelectedSection() {
        const selectedSection = document.getElementById('selected-datasets');
        const countElement = document.getElementById('selected-count');
        const hasSelection = selectedDatasets.size > 0;
        selectedSection.classList.toggle('hidden', !hasSelection);
        if (hasSelection) {
            countElement.textContent = `${selectedDatasets.size} dataset${selectedDatasets.size !== 1 ? 's' : ''} selected`;
            updateCode();
        }
    }
    function updateCode() {
        const datasetIds = Array.from(selectedDatasets).sort().map(id => `"${id}"`).join(', ');
        document.getElementById('r-code').textContent = `library(openesm)\ndatasets <- get_dataset(c(${datasetIds}))`;
        document.getElementById('python-code').textContent = `import openesm\ndatasets = openesm.get_dataset([${datasetIds}])`;
    }
    function toggleSelectedSection() {
        const content = document.querySelector('.selected-content');
        const arrow = document.querySelector('.toggle-arrow');
        const isExpanded = content.classList.toggle('expanded');
        arrow.classList.toggle('expanded', isExpanded);
    }
    function clearSelection() {
        selectedDatasets.clear();
        document.querySelectorAll('.search-result.selected').forEach(el => {
            el.classList.remove('selected');
            el.querySelector('.selection-checkbox').classList.remove('selected');
        });
        updateSelectedSection();
    }
});
</script>
<style>
#custom-search-container { margin: 2rem -15px; }
#custom-search-input { width: 100%; padding: 0.8rem; font-size: 1.1rem; border: 1px solid var(--border); border-radius: 4px; margin-bottom: 1.5rem; background-color: var(--entry); color: var(--primary); }
.search-stats { margin-bottom: 1rem; font-size: 0.9rem; color: var(--secondary); }
.search-result { margin-bottom: 1rem; padding: 1rem; border-radius: 4px; border: 2px solid var(--border); background-color: var(--entry); position: relative; cursor: pointer; transition: border-color 0.2s ease, background-color 0.2s ease; }
.search-result:hover { border-color: var(--primary); }
.search-result.selected { border-color: var(--primary); background-color: var(--code-bg); }
.search-result h3 { margin-top: 0; margin-bottom: 0.5rem; }
.search-result h3 a { color: var(--primary); text-decoration: none; }
.search-result h3 a:hover { text-decoration: underline; }
.search-result p { margin: 0.3rem 0; font-size: 0.9rem; }
.matching-variables { margin-top: 0.8rem; padding-top: 0.8rem; border-top: 1px solid var(--border); }
.matching-variables h4 { margin-bottom: 0.5rem; font-size: 1rem; }
.matching-variables ul { margin: 0.5rem 0 0 0; padding-left: 1.2rem; }
.matching-variables li { margin-bottom: 0.3rem; }
.selection-checkbox { position: absolute; top: 1rem; right: 1rem; width: 22px; height: 22px; border: 2px solid var(--secondary); border-radius: 4px; background: var(--entry); transition: all 0.2s ease; }
.selection-checkbox.selected { background: var(--primary); border-color: var(--primary); color: var(--entry); }
.selection-checkbox.selected::after { content: '✓'; display: block; text-align: center; font-weight: bold; line-height: 18px; }
.selected-datasets { background: var(--code-bg); border: 1px solid var(--border); border-radius: 8px; margin-bottom: 1.5rem; overflow: hidden; transition: all 0.3s ease; }
.selected-datasets.hidden { display: none; }
.selected-header { padding: 12px 15px; background: var(--tertiary); color: var(--primary); display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
.selected-header h3 { margin: 0; font-size: 1rem; }
.toggle-arrow { transition: transform 0.3s ease; }
.toggle-arrow.expanded { transform: rotate(180deg); }
.selected-content { display: none; padding: 15px; }
.selected-content.expanded { display: block; }
.clear-btn { background: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 14px; margin-bottom: 15px; }
.clear-btn:hover { background: #c82333; }
.code-section { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
.code-block { 
  border: none; 
  border-radius: 8px; 
  overflow: hidden; 
  background: #1a202c;
}
.code-header { 
  background: #2d3748; 
  color: #e2e8f0; 
  padding: 10px 12px; 
  font-weight: 600; 
  font-size: 13px; 
}
.code-content { 
  display: block; 
  padding: 12px; 
  margin: 0; /* remove default margin */
  font-family: var(--font-mono); 
  font-size: 13px; 
  white-space: pre-wrap; 
  background: #1a202c; 
  color: #e2e8f0; 
}
/* Also target the pre element specifically */
.code-block pre {
  margin: 0;
  padding: 0;
  background: transparent;
}
/* Add some better monospace fonts */
.code-content { 
  font-family: 'Fira Code', 'Monaco', 'Cascadia Code', 'Roboto Mono', 'Courier New', monospace; 
}
/* Syntax highlighting colors */
.code-content .keyword { color: #f687b3; font-weight: 500; }
.code-content .string { color: #9ae6b4; }
.code-content .function { color: #63b3ed; }
/* Construct dropdown styles */
.construct-dropdown { position: relative; }
.construct-button { width: 100%; padding: 8px 12px; border: 1px solid var(--border); border-radius: 4px; background: var(--entry); color: var(--primary); font-size: 0.875rem; text-align: left; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
.construct-button:hover { border-color: var(--primary); }
.construct-button.active { border-color: var(--primary); }
.construct-dropdown-content { display: none; position: absolute; top: 100%; left: 0; right: 0; background: var(--entry); border: 1px solid var(--border); border-radius: 4px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); max-height: 300px; overflow-y: auto; z-index: 1000; margin-top: 4px; }
.construct-dropdown-content.show { display: block; }
.construct-item { padding: 8px 12px; display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 0.875rem; }
.construct-item:hover { background: var(--code-bg); }
.construct-item input[type="checkbox"] { margin: 0; }
.construct-item label { flex: 1; cursor: pointer; margin: 0; }
.construct-count { color: var(--secondary); font-size: 0.8125rem; }
@media (max-width: 900px) { .code-section { grid-template-columns: 1fr; } }
@media (max-width: 768px) { #custom-search-container { flex-direction: column; margin: 2rem 0; } #custom-search-container aside { width: 100%; margin-bottom: 20px; } }
</style>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://openesmdata.org/">openESM</a></span> · 
        <a href="/openesm/privacy/">Privacy</a> · <a href="https://github.com/bsiepe/openesm">Source code</a> · Built by <a href="https://bsiepe.github.io">Björn Siepe</a> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
